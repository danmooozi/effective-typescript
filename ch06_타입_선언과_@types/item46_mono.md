# 아이템 46  타입 선언과 관련된 세 가지 버전 이해하기

타입스크립트를 쓰면 3 가지 버전을 신경써야한다.

- 라이브러리의 버전
- 타입 선언(@types)의 버전
- 타입스크립트의 버전

이 중에서 하나라도 맞지 않으면, 의존성과 상관없어 보이는 곳에서 엉뚱한 오류가 발생한다.

### @types 할때 문제점

- 라이브러리를 업데이트 했지만 타입 선언은 업데이트 하지 않을때
    - 타입체커를 통과하더라도 런타임 에러가 날 수 있음
    - 일반적으로 라이브러리 본채랑 내용 맞추면 됨
    - 보강(argumentation) 기법을 활용하여 사용하려는 새 함수와 메스트의 타입 정보를 프로젝트 자체에 추가하는것 (  ??? )
    - 또는 타입 선언의 업데이트를 직접 작성하고 공개하여 커뮤니티에 기여하는것 ( ??? )
- 반대로 타입 선언이 라이브러리 보다 최신인 경우
    - 보통 타입 선언을 설치하려고 할 때 뒤늦게 나타남. ( 아마도 declare module 을사용해서 any 타입으로 사용했을 것이다. )
    - 해결책은 라이브러리와 타입 선언의 버전이 맞도록 라이브러리 버전을 올리거나 타입 선언을 낮추기 ( ??? )
- 타입스크립트 버전 자체가 다를때
    - 타입스크립트 버전을 따라서 맞춘다 ( ??? )
    - declare module 의 타입 정보를 없애 버린다. ( ??? )
    - typescriptVersion 으로 제공할 수 있지만 라이브러리중 1% 미만에서 제공한다 ㅠ
- @types 에서 의존성 중복 발생
    - 겹치는 애들을 업데이트 해서 호환하게 만듬
    - 51에서 하는 방법보고 참고 바람

### 따로 번들링할때 문제점

- 아까 처럼 타입 선언 된걸로 해결 불가능
- 프로젝트 내 타입 선언이 다른 라이브러리의 타입 선언에 의존한 경우
    - 작성자가 의존성을 devDpendencies로 한 경우 다른 사용자가 설치했을 때 devDpendencies 내용은 설치 되지가 않아 타입 오류가 발생하게 됩니다.
- 프로젝트의 과거 버전에 있는 타입 선언에 문제가 있는 경우
    - 이 경우엔 과거 버전으로 돌아가야함
- 타입 선언의 패치 업데이트를 자주하기 어렵다.
    - 라이브러리 자체보다 타입 선언에 대한 패치 업데이트가 세 배나 더 많았고, 이 패치 업데이트를 자주하기 어렵습니다.
    - 타입 선언을 공개하여 커뮤니티에 맡기자 ( ??? )

npm 의 끔찍함.
