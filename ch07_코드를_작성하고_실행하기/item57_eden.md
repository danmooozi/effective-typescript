# 57. 소스맵을 사용하여 타입스크립트 디버깅하기

타입스크립트는 자바스크립트로 컴파일하여 실행하기 때문에, 디버깅 툴도 마찬가지로 런타임 자바스크립트 코드를 기반으로 동작한다.  
컴파일된 코드와 원본 타입스크립트 코드의 많은 부분이 다르다면 디버깅이 어려워진다.
이 때 소스맵은 변환된 코드의 위치와 심볼들을 원본 코드에 매핑하여, 원본 코드로 디버깅을 할 수 있도록 지원한다.  
현재 대부분의 브라우저와 IDE가 소스맵을 지원하고 있다.

소스맵을 사용하기 위해서는 tsconfig.json에 다음의 설정을 추가해야 한다.

```json
{
  "compilerOptions": {
    "sourceMap": true
  }
}
```

해당 설정이 추가된 상태에서 컴파일을 하면 각 .ts 파일에 대해서 .js 와 .js.map 파일이 함께 생성된다.  
.js.map 파일이 소스맵이고, 해당 파일이 함께 있으면 브라우저의 디버거에는 .ts 파일이 함께 표시된다.  
이를 통해 .ts 파일 기반으로 브레이킹 포인트를 설정하거나 변수를 조사할 수 있다.

이 때 디버거에서 indes.ts 파일은 이탤릭 글꼴로 표시되는데, 이는 실제 존재하는 파일이 아님을 뜻한다.  
디버거에서는 기본적으로 소스맵을 이용하여 타입스크립트처럼 보이는 파일을 생성해낸다.  
.js.map 파일에서는 원본 파일의 내용을 인라인으로 포함하거나, 추가 설정을 통해 원본 파일의 참조를 포함하도록 할 수 있다.

관련해서 몇 가지 주의할 사항이 있다.

- 번들러나 압축기를 시용할 경우 각자 자신의 소스맵을 생성하게 되는데, 이 때 컴파일된 자바스크립트 파일이 아니라 타입스크립트 파일에 연결되었는지 확인해야 한다.
- 또한 소스맵이 외부에 노출될 경우 원본 타입스크립트 파일이 사용자에게 노출될 수 있으므로 주의해야 한다.
- NodeJS 에서도 소스맵을 사용할 수 있다. 보통 에디터가 자동 인식하거나, NodeJS 프로세스를 브라우저 디버거에 연결할 수 있다.
